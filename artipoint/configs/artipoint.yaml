dataset:
  root_path: "/home/USER/data/arti4d/din080/scene_2025-04-11-11-44-32" # path to the dataset
  tf_file_path:  "/home/USER/data/arti4d/meta/calibration/azure_tf.json"
  flipped: true # camera image is flipped
  gt_poses: true # poses are generated by HTC tracker
  droid_slam: false # Use DroidSLAM for camera pose estimation
  depth_min: 0.25   # Minimum depth value
  depth_max: 3.0    # Maximum depth value

data_loading:
  frame_step: 1  # Step size for loading frames
  pcd_step: 8    # Step size for point cloud creation
  voxel_size: 0.025  # Voxel downsampling size

segmentation:
  use_gt_cues: false # Use ground truth cues for hand segments
  hand_model_repo: "artipoint/hands_segmentation"  # Path to the hand segmentation model
  hand_model_name: "hand_segmentor"
  hand_model_checkpoint_path: "checkpoints/hands_checkpoint.ckpt" # Path to the hand segmentation model checkpoint
  sam_checkpoint: "checkpoints/weight/mobile_sam.pt" # Path to the Mobile-SAM model
  hand_resize: [256, 256] # Resize dimensions for the image input to the hand segmentation model
  smoothing_window_size: 6  # Window size for smoothing the hand segmentation mask
  min_window_size: 30 # Minimum window size for hand action detection
  max_window_size: 120 # Maximum window size for hand action detection
  dilate_kernel_size: 5  # Kernel size for dilating the hand segmentation mask
  dilate_iterations: 1 


tracking:
  model_path: "checkpoints/scaled_offline.pth"  # Path to CoTracker3 model (offline)
  cotracker2: false # Use CoTracker2 model (offline) weights automatically downloaded
  yolo_path: "checkpoints/yolo11x-seg.pt"  # Path to YOLO model used to find person bounding boxes
  backward_tracking: true  # Enable backward tracking in CoTracker

queries:
  manual_queries: false # to select points manually
  num_points: 25 # Number of points near the hand to prompt MobileSAM, grid side will be sqrt(num_points)
  dist_thresh: 0.2  # Depth threshold for selecting points near the hand
  feat_type: "shi"  # Type of feature to use "orb" or "shi"
  max_feat_points: 30  # Number of points to use for feature 
  eps_pixels: 0  # Bounding box buffer around the hand
  max_queries: 1500 # Maximum number of queries to run
  frame_step: 2  # Step size for extracting queries

filtering:
  variance_type: "2d"
  percentile: 80
  smoothness_threshold: 0.2
  filter_unreliable_tracks: true # Enable filtering of unreliable tracks (tracks with low visibility)
  occlusion_threshold: 0.5  # Threshold do discard occluded tracks
  smooth_tracks: true # Enable smoothing of tracks with sparse optimization
  lambda_vel: 0.5 # Weight for velocity term in smoothing loss
  lambda_jerk: 5.0 # Weight for jerk term in smoothing loss
  filter_outlier_tracks: true # Enable filtering of outlier tracks with DBSCAN
  eps: 0.1 # Threshold for DBSCAN clustering to remove outliers
  min_samples: 5 # Minimum number of samples for DBSCAN clustering


motion_estimation:
  theta_prior: null # 1e-6

device:
  use_cuda: true

visualization:
  show_hand_segments: false
  show_segmented_image: false 
  show_3d_tracks: false
  show_trajectory: false
  tracks_leave_trace: 15

debugging:
  write_results: true # Save results to disk
  load_dir: "output_data/arti4d" # Directory to load results from
  output_dir: "output_data/arti4d" # Directory to save results
  save_intermediate_results: true # Save intermediate results, also to the output directory
  load_intermediate_results: false # Load intermediate results from the output directory
  load_tracks_world: true # Load world coordinates tracks from the output directory
  load_tracks_world_filtered: true # Load world filtered tracks from the output directory
  load_tracks_unreliable: true # Load unreliable tracks from the output directory
  load_tracks_wo_outliers: true # Load tracks without outliers from the output directory
  load_tracks_smoothed: true # Load smoothed tracks from the output directory
  segment_selection_enabled: false
  specific_segments: [[257, 317]] # e.g. [[661, 729]]

# Add at the end of the file
hydra:
  job:
    chdir: False
  run:
    dir: .  # Keep outputs in the current directory
  output_subdir: null  # Don't create a .hydra subdirectory with configs